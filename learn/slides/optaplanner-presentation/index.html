<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="twitterbootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="twitterbootstrap/css/highlight.css">
    <link rel="stylesheet" href="dzslides/dzslides-style.css">
    <link rel="stylesheet" href="dzslides/dzslides-core.css">

    <title>OptaPlanner presentation</title>
</head>
<body>

    <section>
        <figure>
            <img src="planner_introduction/optaPlannerLogo.png" alt="OptaPlanner"/>
        </figure>
        <h1>
            Do more business<br/>
            with less resources
        </h1>
        <!-- Replace with the name of the presenter -->
        <footer><span style="font-size: smaller">by</span> Geoffrey De Smet</footer>
    </section>

    <section>
        <h3>What is business resource optimization?</h3>
        <figure>
            <img src="planner_introduction/plannerExamplesAppScreenshot.png"/>
            <p>TSP and VRP demo</p>
        </figure>
    </section>

    <section>
        <h3>What is a planning problem?</h3>
        <div class="row-fluid">
            <div class="span6">
                <img src="planner_introduction/optaPlannerIcon.png"/>
            </div>
            <div class="span6">
                <ul>
                    <li>Complete goals</li>
                    <li>With limited resources</li>
                    <li>Under constraints</li>
                </ul>
            </div>
        </div>
    </section>

    <section>
        <img src="planner_introduction/useCaseOverview.png">
    </section>

    <section>
        <h3>Planning problem use cases</h3>
        <ul style="font-size: smaller;">
            <li><b>Employee shift rostering</b>: timetabling nurses, repairmen, ...</li>
            <li><b>Agenda scheduling</b>: scheduling meetings, appointments, maintenance jobs, advertisements, ...</li>
            <li><b>Educational timetabling</b>: scheduling lessons, courses, exams, conference presentations, ...</li>
            <li><b>Vehicle routing</b>: planning vehicles (trucks, trains, boats, airplanes, ...) with freight and/or people</li>
            <li><b>Bin packing</b>: filling containers, trucks, ships and storage warehouses, but also cloud computers nodes, ...</li>
            <li><b>Job shop scheduling</b>: planning car assembly lines, machine queue planning, workforce task planning, ...</li>
            <li><b>Cutting stock</b>: minimizing waste while cutting paper, steel, carpet, ...</li>
            <li><b>Sport scheduling</b>: planning leagues (football, baseball, ...)</li>
            <li><b>Financial optimization</b>: investment portfolio optimization, risk spreading, ...</li>
        </ul>
    </section>

    <section>
        <h1 class="callout">
            Are planning problems<br/>
            difficult to solve?
        </h1>
    </section>

    <section>
        <img src="presentation_extra/cloudBalanceNpCompleteA_0.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteA_1.png">
    </section>

    <section>
        <img src="presentation_extra/cloudBalanceNpCompleteB_0.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteB_1.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteB_2.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteB_3.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteB_4.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteB_5.png">
    </section>

    <section>
        <img src="presentation_extra/cloudBalanceNpCompleteC_0.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteC_1.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteC_2.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteC_3.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteC_4.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteC_5.png">
    </section>

    <section>
        <img src="presentation_extra/cloudBalanceNpCompleteD.png">
    </section>

    <section>
        <h3>
            Find optimal solution and scale out<br/>
            for an NP-complete problem?
        </h3>
        <p>⇔ Is P = NP?</p>
        <ul>
            <li>Unresolved since 1971</li>
            <li>1&nbsp;000&nbsp;000&nbsp;$ reward since 2000
                <ul>
                    <li>One of the 7 <a href="http://www.claymath.org/millennium/">Millennium Problems</a></li>
                </ul>
            </li>
            <li>Most believe P ≠ NP
                <ul>
                    <li>⇔ <b>Impossible to find optimal solution and scale out</b></li>
                </ul>
            </li>
            <li>3000+ known NP-complete problems (<a href="http://en.wikipedia.org/wiki/List_of_NP-complete_problems">wikipedia</a>)</li>
        </ul>
    </section>
    <section>
        <img src="presentation_extra/npCompleteInterconnection.png">
    </section>

    <section>
        <img src="presentation_extra/cloudBalanceNpCompleteE_0.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteE_1.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteE_2.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteE_3.png">
    </section>

    <section>
        <img src="presentation_extra/cloudBalanceNpCompleteF_0.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteF_1.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteF_2.png">
    </section>
    <section class="immediate">
        <img src="presentation_extra/cloudBalanceNpCompleteF_3.png">
    </section>

    <section>
        <h1 class="callout">
            Yes,<br/>
            planning problems are<br/>
            difficult to solve!
        </h1>
        <p class="callout">(and humans suck at it)</p>
        <p class="callout">(but they don't realize it)</p>
    </section>

    <section>
        <h3>Reuse optimization algorithms</h3>
        <figure>
            <img src="planner_introduction/optaPlannerLogo.png"/>
        </figure>
        <p><b>Find better solutions in time and scale out</b></p>
        <ul>
            <li><b>Open source</b><br/>Apache License</li>
            <li><b>Regular releases</b><br/>Download the zip or from Maven Central</li>
            <li><b>Documented</b><br/>Reference manual, examples, ...</li>
            <li><b>Quality coverage</b><br/>Unit, integration and stress tests</li>
        </ul>
    </section>

    <section>
        <h3>CloudBalancing demo</h3>
        <figure>
            <img src="planner_introduction/plannerExamplesAppScreenshot.png"/>
            <p>CloudBalancing demo</p>
        </figure>
    </section>

    <section>
        <h1>Domain model</h1>
    </section>

    <section>
        <img src="quick_start/cloudBalanceClassDiagram_0.png">
    </section>
    <section>
        <h3>Computer</h3>
        <pre><code class="java">public class Computer {

  private int cpuPower;
  private int memory;
  private int networkBandwidth;

  private int cost;

  // getters
}</code></pre>
    </section>

    <section>
        <img src="quick_start/cloudBalanceClassDiagram_1.png">
    </section>
    <section class="immediate">
        <img src="quick_start/cloudBalanceClassDiagram_2.png">
    </section>
    <section>
        <h3>Process is a planning entity</h3>
        <pre><code class="java">@PlanningEntity
public class Process {

  private int requiredCpuPower;
  private int requiredMemory;
  private int requiredNetworkBandwidth;

  ...

  // getters
}</code></pre>
    </section>
    <section>
        <h3>Process has a planning variable</h3>
        <pre><code class="java">@PlanningEntity
public class Process {
  ...
  private Computer computer;

  @PlanningVariable(valueRangeProviderRefs = {"computerRange"})
  public Computer getComputer() {
    return computer;
  }
  public void setComputer(Computer computer) {...}
  ...
}</code></pre>
    </section>

    <section>
        <img src="quick_start/cloudBalanceClassDiagram_3.png">
    </section>
    <section class="immediate">
        <img src="quick_start/cloudBalanceClassDiagram_4.png">
    </section>
    <section>
        <h3>Solution CloudBalance: problem facts</h3>
        <pre><code class="java">public class CloudBalance
    implements Solution&lt;HardSoftScore&gt; {

  private List&lt;Computer&gt; computerList;

  @ValueRangeProvider(id = "computerRange")
  public List&lt;Computer&gt; getComputerList() {
    return computerList;
  }

  ...
}</code></pre>
    </section>
    <section>
        <h3>Solution CloudBalance: planning entities</h3>
        <pre><code class="java">public class CloudBalance
    implements Solution&lt;HardSoftScore&gt; {
  ...

  private List&lt;Process&gt; processList;

  @PlanningEntityCollectionProperty
  public List&lt;Process&gt; getProcessList() {
    return processList;
  }

  ...
}</code></pre>
    </section>
    <section>
        <h3>Solution CloudBalance: getProblemFacts()</h3>
        <pre><code class="java">public class CloudBalance
    implements Solution&lt;HardSoftScore&gt; {
  ...

  // Used in score constraints
  public Collection&lt;Object&gt; getProblemFacts() {
    List&lt;Object&gt; facts = new ArrayList&lt;Object&gt;();
    facts.addAll(computerList);
    return facts;
  }

  ...
}</code></pre>
    </section>
    <section>
        <h3>Solution CloudBalance: score</h3>
        <pre><code class="java">public class CloudBalance
    implements Solution&lt;HardSoftScore&gt; {
  ...

  private HardSoftScore score;

  public HardSoftScore getScore() {...}
  public void setScore(HardSoftScore score) {...}

  ...
}</code></pre>
    </section>

    <section>
        <h1>Score constraints</h1>
    </section>

    <section>
        <h1 class="callout">
            Given 2 solutions<br/>
            which one is better?
        </h1>
    </section>

    <section>
        <img src="quick_start/cloudBalanceScoreCalculation_0.png">
    </section>
    <section class="immediate">
        <img src="quick_start/cloudBalanceScoreCalculation_1.png">
    </section>
    <section class="immediate">
        <img src="quick_start/cloudBalanceScoreCalculation_2.png">
    </section>
    <section class="immediate">
        <img src="quick_start/cloudBalanceScoreCalculation_3.png">
    </section>
    <section class="immediate">
        <img src="quick_start/cloudBalanceScoreCalculation_4.png">
    </section>
    <section class="immediate">
        <img src="quick_start/cloudBalanceScoreCalculation_5.png">
    </section>
    <section class="immediate">
        <img src="quick_start/cloudBalanceScoreCalculation_6.png">
    </section>
    <section class="immediate">
        <img src="quick_start/cloudBalanceScoreCalculation_7.png">
    </section>
    <section class="immediate">
        <img src="quick_start/cloudBalanceScoreCalculation_8.png">
    </section>

    <section>
        <h3>Score calculation</h3>
        <ul>
            <li>Easy Java</li>
            <li>Incremental Java</li>
            <li>Drools</li>
        </ul>
    </section>

    <section>
        <h3>Easy Java score calculation</h3>
        <ul>
            <li>Easy to implement</li>
            <li>Bridge an existing system</li>
            <li>Slow</li>
        </ul>
        <pre><code class="java">public class CloudBalancingEasyScoreCalculator
    implements EasyScoreCalculator&lt;CloudBalance&gt; {

  public Score calculateScore(CloudBalance cb) {
    ...
    return DefaultHardSoftScore.valueOf(
        hardScore, softScore);
  }

}</code></pre>
    </section>

    <section>
        <h3>Incremental Java score calculation</h3>
        <ul>
            <li>Fast
                <ul>
                    <li>Solution changes ⇒ recalculate score delta only</li>
                </ul>
            </li>
            <li>Hard to implement
                <ul>
                    <li>Much boilerplate code</li>
                </ul>
            </li>
        </ul>
    </section>

    <section>
        <h3>Drools score calculation</h3>
        <ul>
            <li>Incremental
                <ul>
                    <li>No boilerplate code</li>
                </ul>
            </li>
            <li>Constraints in Drools Rule Language (DRL)
                <ul>
                    <li>Declarative (like SQL, regular expression)</li>
                </ul>
            </li>
            <li>Integration opportunities
                <ul>
                    <li>Guvnor</li>
                    <li>Decision tables</li>
                </ul>
            </li>
        </ul>
    </section>
    <section>
        <h3>DRL soft constraint: computer cost</h3>
        <pre><code class="drl">rule "computerCost"
  when
    // there is a computer
    $s : Computer($c : cost)
    // there is a processes on that computer
    exists Process(computer == $s)
  then
    // lower soft score by the maintenance cost
    scoreHolder.addSoftConstraintMatch(kcontext,
        - $cost);
end</code></pre>
    </section>
    <section>
        <h3>DRL hard constraint: CPU power</h3>
        <pre><code class="drl">rule "requiredCpuPowerTotal"
  when
    // there is a computer
    $s : Computer($cpu : cpuPower)
    // with too little cpu for its processes
    $total : Number(intValue > $cpu) from accumulate(
      Process(computer == $s,
          $requiredCpu : requiredCpuPower),
      sum($requiredCpu)
    )
  then
    // lower hard score by the excessive CPU usage
    scoreHolder.addHardConstraintMatch(kcontext,
        $cpu - $total.intValue());
end</code></pre>
    </section>

    <section>
        <h1>Solving it</h1>
    </section>

    <section>
        <h3>Solver configuration by XML</h3>
        <pre><code class="xml">&lt;solver&gt;
  &lt;solutionClass&gt;...CloudBalance&lt;/solutionClass&gt;
  &lt;planningEntityClass&gt;...Process&lt;/planningEntityClass&gt;

  &lt;scoreDirectorFactory&gt;
    &lt;scoreDefinitionType&gt;HARD_AND_SOFT&lt;/scoreDefinitionType&gt;
    &lt;scoreDrl&gt;...ScoreRules.drl&lt;/scoreDrl&gt;
  &lt;/scoreDirectorFactory&gt;

  &lt;!-- optimization algorithms --&gt;
&lt;/solver&gt;</code></pre>
    </section>

    <section>
        <h3>Solving</h3>
        <pre><code class="java">SolverFactory factory = SolverFactory.createFromXmlResource(
    "...SolverConfig.xml");
Solver solver = factory.buildSolver();

solver.solve(cloudBalance);
cloudBalance = (CloudBalance) solver.getBestSolution();</code></pre>
    </section>

    <section>
        <img src="planner_configuration/inputOutputOverview.png">
    </section>

    <section>
        <h1>Optimization algorithms</h1>
    </section>

    <section>
        <img src="presentation_extra/cloudBalanceBruteForce.png">
    </section>
    <section>
        <h3>Brute force config</h3>
        <pre><code class="xml">&lt;solver&gt;
  ...

  &lt;bruteForce /&gt;
&lt;/solver&gt;</code></pre>
    </section>
    <section>
        <h3>Brute force scalability</h3>
        <figure>
            <img src="exhaustive_search/exhaustiveSearchScalabilityCloudBalance.png"/>
        </figure>
    </section>
    <section>
        <h3>Plan 1200 processes with brute force?</h3>
        <br/>
        <figure>
            <img src="presentation_extra/bruteForceSolvingDialog.png"/>
        </figure>
    </section>
    <section>
        <img src="optimization_algorithms/cloudBalanceSearchSpaceSize_0.png">
    </section>
    <section class="immediate">
        <img src="optimization_algorithms/cloudBalanceSearchSpaceSize_1.png">
    </section>
    <section class="immediate">
        <img src="optimization_algorithms/cloudBalanceSearchSpaceSize_2.png">
    </section>

    <section>
        <img src="presentation_extra/cloudBalanceFirstFit.png">
    </section>
    <section>
        <h3>First Fit config</h3>
        <pre><code class="xml">&lt;solver&gt;
  ...

  &lt;constructionHeuristic&gt;
    &lt;constructionHeuristicType&gt;FIRST_FIT&lt;/constructionHeuristicType&gt;
  &lt;/constructionHeuristic&gt;
&lt;/solver&gt;</code></pre>
    </section>
    <section>
        <h3>First Fit scalability</h3>
        <figure>
            <img src="construction_heuristics/firstFitScalabilityCloudBalance.png"/>
        </figure>
    </section>
    <section>
        <h3>First Fit results</h3>
        <figure>
            <img src="presentation_extra/cloudBalanceResults_0.png"/>
            <p>All hard constraints satisfied: maintenance cost shown</p>
        </figure>
    </section>

    <section>
        <img src="presentation_extra/cloudBalanceFirstFitDecreasing.png">
    </section>
    <section>
        <h3>First Fit Decreasing config</h3>
        <pre><code class="xml">&lt;solver&gt;
  ...

  &lt;constructionHeuristic&gt;
    &lt;constructionHeuristicType&gt;FIRST_FIT_DECREASING&lt;/constructionHeuristicType&gt;
  &lt;/constructionHeuristic&gt;
&lt;/solver&gt;</code></pre>
    </section>

    <section>
        <h3>DifficultyComparator</h3>
        <pre><code class="java">public class ProcessDifficultyComparator
    implements Comparator&lt;Process&gt; {
  public int compare(Process a, Process b) {
    // Compare on requiredCpuPower * requiredMemory
    //     * requiredNetworkBandwidth
  }
}

@PlanningEntity(difficultyComparatorClass
    = ProcessDifficultyComparator.class)
public class Process  {
  ...
}</code></pre>
    </section>
    <section>
        <h3>First Fit Decreasing scalability</h3>
        <figure>
            <img src="construction_heuristics/firstFitDecreasingScalabilityCloudBalance.png"/>
        </figure>
    </section>
    <section>
        <h3>First Fit Decreasing results</h3>
        <figure>
            <img src="presentation_extra/cloudBalanceResults_1.png"/>
        </figure>
    </section>

    <section>
        <img src="presentation_extra/cloudBalanceLocalSearch.png">
    </section>
    <section>
        <img src="optimization_algorithms/generalPhaseSequence_1.png">
    </section>
    <section>
        <h3>Construction Heuristics + Local Search</h3>
        <pre><code class="xml">&lt;solver&gt;
  ...

  &lt;constructionHeuristic&gt;
    &lt;constructionHeuristicType&gt;FIRST_FIT_DECREASING&lt;/constructionHeuristicType&gt;
  &lt;/constructionHeuristic&gt;
  &lt;localSearch&gt;
    ...
  &lt;localSearch&gt;
&lt;/solver&gt;</code></pre>
    </section>

    <section>
        <img src="presentation_extra/hillClimbingLogo.png">
    </section>
    <section>
        <h3>Hill Climbing config</h3>
        <pre><code class="xml">&lt;localSearch&gt;
  &lt;forager&gt;
    &lt;!-- Untweaked standard value --&gt;
    &lt;acceptedCountLimit&gt;1000&lt;/acceptedCountLimit&gt;
  &lt;/forager&gt;
&lt;/localSearch&gt;</code></pre>
    </section>

    <section>
        <img src="presentation_extra/tabuSearchLogo.png">
    </section>
    <section>
        <h3>Tabu Search config</h3>
        <pre><code class="xml">&lt;localSearch&gt;
  &lt;acceptor&gt;
    &lt;!-- Untweaked standard value --&gt;
    &lt;entityTabuSize&gt;7&lt;/entityTabuSize&gt;
  &lt;/acceptor&gt;
  &lt;forager&gt;
    &lt;!-- Untweaked standard value --&gt;
    &lt;acceptedCountLimit&gt;1000&lt;/acceptedCountLimit&gt;
  &lt;/forager&gt;
&lt;/localSearch&gt;</code></pre>
    </section>

    <section>
        <img src="presentation_extra/simulatedAnnealingLogo.png">
    </section>
    <section>
        <h3>Simulated Annealing config</h3>
        <pre><code class="xml">&lt;localSearch&gt;
  &lt;acceptor&gt;
    &lt;!-- Tweaked value --&gt;
    &lt;simulatedAnnealingStartingTemperature&gt;
        0hard/400soft
    &lt;/simulatedAnnealingStartingTemperature&gt;
  &lt;/acceptor&gt;
  &lt;forager&gt;
    &lt;!-- Untweaked standard value --&gt;
    &lt;acceptedCountLimit&gt;4&lt;/acceptedCountLimit&gt;
  &lt;/forager&gt;
&lt;/localSearch&gt;</code></pre>
    </section>

    <section>
        <h3>Local Search results</h3>
        <figure>
            <img src="presentation_extra/cloudBalanceResults_2.png"/>
        </figure>
    </section>
    <section>
        <h3>Cost ($) reduction</h3>
        <div class="row-fluid">
            <div class="span6">
                <img src="presentation_extra/cloudBalanceResultsZoomed.png"/>
            </div>
            <div class="span6">
                <ul>
                    <li>Compared to First Fit</li>
                    <li>First Fit Decreasing
                        <ul>
                            <li>49&nbsp;480&nbsp;$ = 4&nbsp;%</li>
                        </ul>
                    </li>
                    <li>Tabu Search
                        <ul>
                            <li>160&nbsp;860&nbsp;$ = 14&nbsp;%</li>
                        </ul>
                    </li>
                    <li>Simulated Annealing
                        <ul>
                            <li>128&nbsp;950&nbsp;$ = 11&nbsp;%</li>
                        </ul>
                    </li>
                    <li>Few constraints
                        <ul>
                            <li>⇒ low ROI</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </section>

    <section>
        <h1>Repeated planning:<br/>continuous/real-time</h1>
    </section>

    <section>
        <img src="repeated_planning/continuousPlanningPatientAdmissionSchedule_0.png">
    </section>
    <section class="immediate">
        <img src="repeated_planning/continuousPlanningPatientAdmissionSchedule_1.png">
    </section>

    <section>
        <img src="repeated_planning/realTimePlanningVehicleRouting_0.png">
    </section>
    <section class="immediate">
        <img src="repeated_planning/realTimePlanningVehicleRouting_1.png">
    </section>
    <section class="immediate">
        <img src="repeated_planning/realTimePlanningVehicleRouting_2.png">
    </section>
    <section class="immediate">
        <img src="repeated_planning/realTimePlanningVehicleRouting_3.png">
    </section>
    <section class="immediate">
        <img src="repeated_planning/realTimePlanningVehicleRouting_4.png">
    </section>
    <section class="immediate">
        <img src="repeated_planning/realTimePlanningVehicleRouting_5.png">
    </section>

    <section>
        <h3>Summary</h3>
        <ul>
            <li>OptaPlanner solves planning and scheduling problems</li>
            <li>Adding constraints: easy and scalable</li>
            <li>Switching/combining optimization algorithms: easy</li>
        </ul>
    </section>
    <section>
        <img src="planner_introduction/distributionZip.png">
    </section>
    <section>
        <h3>Q & A</h3>
        <ul>
            <li>OptaPlanner homepage
                <ul>
                    <li><a href="http://www.optaplanner.org<">http://www.optaplanner.org</a></li>
                </ul>
            </li>
            <li>Reference manual
                <ul>
                    <li><a href="http://www.optaplanner.org/learn/documentation.html">http://www.optaplanner.org/learn/documentation.html</a></li>
                </ul>
            </li>
            <li>Download/fork this presentation
                <ul>
                    <li><a href="http://www.optaplanner.org/learn/slides.html">http://www.optaplanner.org/learn/slides.html</a></li>
                </ul>
            </li>
        </ul>
        <br/>
        <ul>
            <li>What did you think of this presentation?
                <ul>
                    <li>Twitter: <a href="http://twitter.com/geoffreydesmet">@geoffreydesmet</a></li>
                    <li>Google+: <a href="https://plus.google.com/+GeoffreyDeSmet">+GeoffreyDeSmet</a></li>
                </ul>
            </li>
        </ul>
    </section>



    <section>
        <h1>
            <span class="smaller-p-text">Introduction to</span><br/>
            heuristics and metaheuristics<br/>
            <span class="smaller-p-text">for</span><br/>
            business resource optimization
        </h1>
        <!-- Replace with the name of the presenter -->
        <footer><span style="font-size: smaller">by</span> Geoffrey De Smet</footer>
    </section>

    <section>
        <h3>N Queens demo</h3>
        <figure>
            <img src="planner_introduction/plannerExamplesAppScreenshot.png"/>
            <p>demo</p>
        </figure>
    </section>

    <section>
        <h3>Simplified problem</h3>
        <h4>N Queens</h4>
        <ul>
            <li>Place n queens on a n sizes chessboard</li>
            <li>No 2 queens can attach each other</li>
        </ul>
        <div>
            <div class="leftColumn">
                <figure>
                    <img src="use_cases_and_examples/partiallySolvedNQueens04Explained.png"/>
                    <p>Bad</p>
                </figure>
            </div>
            <div class="rightColumn">
                <figure>
                    <img src="use_cases_and_examples/solvedNQueens04.png"/>
                    <p>Good</p>
                </figure>
            </div>
        </div>
        <ul class="incremental" style="clear: both;">
            <li>Imperfect example
                <ul>
                    <li>Not NP-complete (shortcuts exist)</li>
                    <li>Score function is too simple (too black and white)</li>
                </ul>
            </li>
        </ul>
    </section>

    <section>
        <h3>What solution is better?</h3>
        <figure>
            <img src="presentation_extra/someSolutionsNQueens04_0.png">
        </figure>
        <ul class="incremental">
            <li>Need for <b>objective scoring</b></li>
            <li>Better score ⇔ better solution</li>
            <li>Highest score ⇔ optimal solution</li>
        </ul>
    </section>

    <section>
        <img src="score_calculation/positiveAndNegativeConstraints_0.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/positiveAndNegativeConstraints_1.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/positiveAndNegativeConstraints_2.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/positiveAndNegativeConstraints_3.png">
    </section>
    <section>
        <img src="score_calculation/scoreWeighting_0.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreWeighting_1.png">
    </section>
    <section>
        <img src="score_calculation/scoreWeightType_0.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreWeightType_1.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreWeightType_2.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreWeightType_3.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreWeightType_4.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreWeightType_5.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreWeightType_6.png">
    </section>
    <section>
        <img src="score_calculation/scoreLevels_0.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreLevels_1.png">
    </section>
    <section>
        <img src="score_calculation/scoreFoldingIsBroken_0.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreFoldingIsBroken_1.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreFoldingIsBroken_2.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreFoldingIsBroken_3.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreFoldingIsBroken_4.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreFoldingIsBroken_5.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreFoldingIsBroken_6.png">
    </section>
    <section>
        <img src="score_calculation/scoreClassDiagram_0.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreClassDiagram_1.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreClassDiagram_2.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreClassDiagram_3.png">
    </section>
    <section>
        <img src="score_calculation/scoreTrap_0.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreTrap_1.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreTrap_2.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreTrap_3.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreTrap_4.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreTrap_5.png">
    </section>
    <section>
        <img src="score_calculation/paretoOptimizationScoring_0.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/paretoOptimizationScoring_1.png">
    </section>
    <section>
        <img src="score_calculation/scoreComposition_0.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreComposition_1.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreComposition_2.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreComposition_3.png">
    </section>
    <section class="immediate">
        <img src="score_calculation/scoreComposition_4.png">
    </section>

    <section>
        <h3>N Queens</h3>
        <ul>
            <li>Hard constraints:
                <ul>
                    <li>-1 for every pair of conflicting queens</li>
                </ul>
            </li>
            <li>Soft constraints:
                <ul>
                    <li>None</li>
                </ul>
            </li>
        </ul>
        <div>
            <div class="leftColumn">
                <figure>
                    <img src="use_cases_and_examples/partiallySolvedNQueens04Explained.png"/>
                    <p>Score = -2</p>
                    <p>Conflicts: A-B, B-D</p>
                </figure>
            </div>
            <div class="rightColumn">
                <figure>
                    <img src="use_cases_and_examples/solvedNQueens04.png"/>
                    <p>Score = 0</p>
                </figure>
            </div>
        </div>
    </section>
    <section>
        <img src="planner_configuration/entityVariableAndValueExamples_0.png">
    </section>
    <section class="immediate">
        <img src="planner_configuration/entityVariableAndValueExamples_1.png">
    </section>
    <section>
        <img src="use_cases_and_examples/curriculumCourseClassDiagram.png">
    </section>

    <section>
        <h3>How do we find the best solution?</h3>
        <figure>
            <img src="presentation_extra/someSolutionsNQueens04_1.png">
        </figure>
        <ul class="incremental">
            <li>Need for <b>optimization algorithms</b></li>
            <li>Best solution in available time</li>
        </ul>
    </section>

    <section>
        <img src="presentation_extra/bruteForceLogo.png">
    </section>
    <section>
        <img src="exhaustive_search/bruteForceNQueens04_0.png">
    </section>
    <section class="immediate">
        <img src="exhaustive_search/bruteForceNQueens04_1.png">
    </section>
    <section class="immediate">
        <img src="exhaustive_search/bruteForceNQueens04_2.png">
    </section>
    <section class="immediate">
        <img src="exhaustive_search/bruteForceNQueens04_3.png">
    </section>
    <section class="immediate">
        <img src="exhaustive_search/bruteForceNQueens04_4.png">
    </section>
    <section>
        <h3>Brute Force scalability</h3>
        <figure>
            <img src="exhaustive_search/exhaustiveSearchScalabilityNQueens.png">
            <p>
                8 queens = 15.7 seconds<br/>
                9 queens = 2.5 minutes (times 10)<br/>
                10 queens = 0.83 hours (times 20)
            </p>
        </figure>
    </section>
    <section>
        <h3>How many combinations for 100 queens?</h3>
        <div style="float: right;">
            <img src="use_cases_and_examples/solvedNQueens04.png"/>
        </div>
        <div>
            <ul>
                <li>1 queen per column</li>
                <li>100 queens ⇒ 100 variables</li>
                <li>100 rows ⇒ 100 values per variable</li>
            </ul>
        </div>
        <div style="clear: both;"></div>
        <div style="float: left;">
            <figure>
                <img src="presentation_extra/humans.png"/>
                <p class="attribution">Source: NASA (wikipedia)</p>
            </figure>
        </div>
        <div style="padding-top: 30px;">
            <p style="text-align: center;">
                &gt; humans?<br/>
                7&nbsp;000&nbsp;000&nbsp;000
            </p>
        </div>
    </section>
    <section>
        <h3>How many combinations for 100 queens?</h3>
        <div style="float: right;">
            <img src="use_cases_and_examples/solvedNQueens04.png"/>
        </div>
        <div>
            <ul>
                <li>1 queen per column</li>
                <li>100 queens ⇒ 100 variables</li>
                <li>100 rows ⇒ 100 values per variable</li>
            </ul>
        </div>
        <div style="clear: both;"></div>
        <div style="float: left;">
            <figure>
                <img src="presentation_extra/universe.png" style="width: 200px; height: 200px;"/>
                <p class="attribution">Source: NASA and ESA (wikipedia)</p>
            </figure>
        </div>
        <div style="padding-top: 30px;">
            <p style="text-align: center;">
                &gt; minimum atoms<br>
                in the observable universe?<br/>
                10<sup>80</sup>
            </p>
        </div>
    </section>
    <section>
        <h3>How many combinations for 100 queens?</h3>
        <div style="float: right;">
            <img src="use_cases_and_examples/solvedNQueens04.png"/>
        </div>
        <div>
            <ul>
                <li>1 queen per column</li>
                <li>100 queens ⇒ 100 variables</li>
                <li>100 rows ⇒ 100 values per variable</li>
            </ul>
        </div>
        <div style="clear: both;"></div>
        <div style="padding-top: 30px;">
            <p style="text-align: center;">
                100<sup>100</sup> = 10<sup>200</sup><br/>
            </p>
            <p class="math" style="text-align: center;">
                1&nbsp;0000000000&nbsp;0000000000&nbsp;0000000000&nbsp;0000000000&nbsp;0000000000<br/>
                &nbsp;&nbsp;0000000000&nbsp;0000000000&nbsp;0000000000&nbsp;0000000000&nbsp;0000000000<br/>
                &nbsp;&nbsp;0000000000&nbsp;0000000000&nbsp;0000000000&nbsp;0000000000&nbsp;0000000000<br/>
                &nbsp;&nbsp;0000000000&nbsp;0000000000&nbsp;0000000000&nbsp;0000000000&nbsp;0000000000
            </p>
        </div>
    </section>
    <section>
        <h3>How many combinations for n queens?</h3>
        <div style="float: right;">
            <img src="use_cases_and_examples/solvedNQueens04.png"/>
        </div>
        <div>
            <ul>
                <li>1 queen per column</li>
                <li>n queens ⇒ n variables</li>
                <li>n rows ⇒ n values per variable</li>
            </ul>
        </div>
        <div style="clear: both;"></div>
        <div style="padding-top: 30px;">
            <p style="text-align: center;">
                n<sup>n</sup>
            </p>
            <p style="text-align: center;">
                |valueSet|<sup>|variableSet|</sup>
            </p>
        </div>
    </section>
    <section>
        <h3>How long?</h3>
        <p>Presume 10<sup>9</sup> scores/ms ⇒ 10<sup>20</sup> scores/year</p>
        <table>
            <thead>
                <tr>
                    <th>Queens</th>
                    <th>Combinations</th>
                    <th>Calculation time</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>100</td>
                    <td>100<sup>100</sup> = 10<sup>200</sup></td>
                    <td>10<sup>180</sup> years</td>
                </tr>
                <tr>
                    <td>1000</td>
                    <td>1000<sup>1000</sup> = 10<sup>3000</sup></td>
                    <td>10<sup>2980</sup> years</td>
                </tr>
                <tr>
                    <td>10000</td>
                    <td>10000<sup>10000</sup> = 10<sup>40000</sup></td>
                    <td>10<sup>39980</sup> years</td>
                </tr>
            </tbody>
        </table>
        <figure>
            <img src="exhaustive_search/exhaustiveSearchScalabilityNQueens.png" style="width: 200px;">
            <p>Moore's law == a drop in the ocean</p>
        </figure>
    </section>
    <section>
        <img src="exhaustive_search/depthFirstBranchAndBoundNQueens04_0.png">
    </section>
    <section class="immediate">
        <img src="exhaustive_search/depthFirstBranchAndBoundNQueens04_1.png">
    </section>
    <section class="immediate">
        <img src="exhaustive_search/depthFirstBranchAndBoundNQueens04_2.png">
    </section>
    <section class="immediate">
        <img src="exhaustive_search/depthFirstBranchAndBoundNQueens04_3.png">
    </section>
    <section class="immediate">
        <img src="exhaustive_search/depthFirstBranchAndBoundNQueens04_4.png">
    </section>
    <section class="immediate">
        <img src="exhaustive_search/depthFirstBranchAndBoundNQueens04_5.png">
    </section>
    <section class="immediate">
        <img src="exhaustive_search/depthFirstBranchAndBoundNQueens04_6.png">
    </section>
    <section class="immediate">
        <img src="exhaustive_search/depthFirstBranchAndBoundNQueens04_7.png">
    </section>
    <section class="immediate">
        <img src="exhaustive_search/depthFirstBranchAndBoundNQueens04_8.png">
    </section>
    <section>
        <h3>Exhaustive Search doesn't scale</h3>
        <ul>
            <li>Branches explode exponentially</li>
            <li>Not enough CPU</li>
            <li>Not enough memory</li>
        </ul>
    </section>

    <section>
        <img src="presentation_extra/firstFitLogo.png">
    </section>
    <section>
        <img src="construction_heuristics/firstFitNQueens04.png">
    </section>
    <section>
        <img src="presentation_extra/firstFitDecreasingLogo.png">
    </section>
    <section>
        <img src="construction_heuristics/firstFitDecreasingNQueens04.png">
    </section>

    <section>
        <img src="optimization_algorithms/generalPhaseSequence_0.png">
    </section>
    <section>
        <img src="optimization_algorithms/scopeOverview_0.png">
    </section>
    <section class="immediate">
        <img src="optimization_algorithms/scopeOverview_1.png">
    </section>
    <section class="immediate">
        <img src="optimization_algorithms/scopeOverview_2.png">
    </section>
    <section class="immediate">
        <img src="optimization_algorithms/scopeOverview_3.png">
    </section>
    <section>
        <h3>Move types</h3>
        <ul>
            <li>Change move</li>
            <li>Swap move</li>
            <li>...</li>
        </ul>
    </section>
    <section>
        <img src="move_and_neighbourhood_selection/changeMove_0.png">
    </section>
    <section>
        <img src="move_and_neighbourhood_selection/swapMove_0.png">
    </section>
    <section>
        <h3>All change moves</h3>
        <div>
            <div class="leftColumn">
                <figure>
                    <img src="move_and_neighbourhood_selection/possibleMovesNQueens04.png">
                </figure>
            </div>
            <div class="rightColumn">
                <table>
                    <thead>
                        <tr>
                            <th>n</th>
                            <th># moves</th>
                            <th># solutions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>4</td>
                            <td>16</td>
                            <td>256</td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>64</td>
                            <td>16777216</td>
                        </tr>
                        <tr>
                            <td>64</td>
                            <td>4096</td>
                            <td>10^116</td>
                        </tr>
                        <tr>
                            <td>n</td>
                            <td>n^2</td>
                            <td>n^n</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    <section>
        <h3>Multiple moves</h3>
        <figure>
            <img src="move_and_neighbourhood_selection/sequentialMovesNQueens04.png">
            <p>Multiple moves can reach any solution</p>
        </figure>
    </section>

    <section>
        <img src="presentation_extra/hillClimbingLogo.png">
    </section>
    <section>
        <img src="local_search/hillClimbingNQueens04.png">
    </section>
    <section>
        <img src="local_search/hillClimbingGetsStuckInLocalOptimaNQueens04.png">
    </section>
    <section>
        <img src="presentation_extra/tabuSearchLogo.png">
    </section>
    <section>
        <img src="local_search/entityTabuSearch.png">
    </section>
    <section>
        <img src="presentation_extra/simulatedAnnealingLogo.png">
    </section>
    <section>
        <img src="local_search/simulatedAnnealing.png">
    </section>
    <section>
        <img src="presentation_extra/lateAcceptanceLogo.png">
    </section>
    <section>
        <img src="local_search/lateAcceptance.png">
    </section>

    <section>
        <h3>Performance tricks</h3>
    </section>
    <section>
        <img src="score_calculation/deltaBasedScoreCalculationNQueens04.png">
    </section>
    <section>
        <img src="move_and_neighbourhood_selection/selectorTree.png">
    </section>
    <section>
        <img src="move_and_neighbourhood_selection/cachedShuffledSelection.png">
    </section>
    <section>
        <img src="move_and_neighbourhood_selection/jitRandomSelection.png">
    </section>
    <section>
        <img src="move_and_neighbourhood_selection/filteredSelection.png">
    </section>

    <section>
        <img src="benchmarking_and_tweaking/benchmarkOverview.png">
    </section>
    <section>
        <h3>Benchmark results</h3>
        <p class="demo">Demo</p>
    </section>

    <section>
        <h3>Reuse existing business code</h3>
        <pre><code class="java">public class Nurse {

  private Country country;

  public boolean isHoliday(Date date) {
    if (country == Country.BE) {
      // true if date is 1-JAN, easter monday, 21-JUL, ...
    } else if (country == Country.FR) {
      // true if date is 1-JAN, easter monday, 14-JUL, ...
    } else if (...) {
      ...
    }
    ...
  }

}</code></pre>
    </section>

    <section>
        <h3>Q & A</h3>
        <ul>
            <li>OptaPlanner homepage
                <ul>
                    <li><a href="http://www.optaplanner.org<">http://www.optaplanner.org</a></li>
                </ul>
            </li>
            <li>Reference manual
                <ul>
                    <li><a href="http://www.optaplanner.org/learn/documentation.html">http://www.optaplanner.org/learn/documentation.html</a></li>
                </ul>
            </li>
            <li>Download/fork this presentation
                <ul>
                    <li><a href="http://www.optaplanner.org/learn/slides.html">http://www.optaplanner.org/learn/slides.html</a></li>
                </ul>
            </li>
        </ul>
        <br/>
        <ul>
            <li>What did you think of this presentation?
                <ul>
                    <li>Twitter: <a href="http://twitter.com/geoffreydesmet">@geoffreydesmet</a></li>
                    <li>Google+: <a href="https://plus.google.com/+GeoffreyDeSmet">+GeoffreyDeSmet</a></li>
                </ul>
            </li>
        </ul>
    </section>

    <div id="progress-bar"></div>
    <script src="dzslides/dzslides.js"></script>
    <script src="twitterbootstrap/js/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
